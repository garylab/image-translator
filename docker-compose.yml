services:
  web:
    build: .
    env_file:
      - .env
    ports:
      - 8055:8000
    command: uvicorn src.api:app --host 0.0.0.0 --port 8000

  # Tor SOCKS5 proxy for anonymous crawling
  tor:
    image: dperson/torproxy
    restart: unless-stopped
    environment:
      - TOR_NewCircuit=10  # New circuit every 30 seconds for IP rotation
    # ports:
    #   - 9050:9050  # SOCKS5 proxy (uncomment to expose externally)
    #   - 9051:9051  # Tor control port

